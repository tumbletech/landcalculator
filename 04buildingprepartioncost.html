<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Land Purchase Cost</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>
<body class="bg-light">

    <!-- Header -->
    <nav class="navbar lime-header bg-dark px-3">
        <div class="container-fluid text-white">
        <a href="00b.dashboard.html" class="btn btn-sm btn-outline-light me-2">‚Üê Back</a>
        <span class="navbar-brand mb-0 h6 text-white">Building Preparation Cost</span>
        </div>
    </nav>

    <!--- Picked Property Details --->
    <div class="mb-3 bg-light border rounded small p-2">
        <div><strong>Address:</strong> <span id="summaryAddress">Loading...</span></div>
        <div><strong>Parcel ID:</strong> <span id="summaryParcelID">Loading...</span></div>
        <div><strong>Coordinates:</strong> <span id="summaryCoords">Loading...</span></div>
    </div>

    <!-- Form Body -->
    <div class="container my-5">
        <p class="text-muted small">
          Estimate the costs involved in preparing the property for vertical construction. This may include demolition, grading, soil testing, temporary utilities, and permits.
        </p>

        <!-- Section 1: Demolition -->
        <div class="mb-4">
          <h6 class="fw-bold">Demolition of Existing Structure</h6>
          <div class="row g-2 align-items-end">
            <div class="col-md-3">
              <label class="form-label">Structure Type</label>
              <select class="form-select">
                <option selected disabled>Choose...</option>
                <option>House</option>
                <option>Barn</option>
                <option>Shed</option>
                <option>Other</option>
              </select>
            </div>
            <div class="col-md-2">
              <label class="form-label">Size (sq ft)</label>
              <input type="number" class="form-control" min="0" />
            </div>
            <div class="col-md-2">
              <label class="form-label">Unit Cost ($/sq ft)</label>
              <input type="number" class="form-control" step="0.01" />
            </div>
            <div class="col-md-2">
              <label class="form-label">Subtotal ($)</label>
              <input type="text" class="form-control" readonly />
            </div>
          </div>
        </div>

        <!-- Section 2: Grading -->
        <div class="mb-4">
          <h6 class="fw-bold">Grading / Land Leveling</h6>
          <div class="row g-2 align-items-end">
            <div class="col-md-3">
              <label class="form-label">Area (sq ft or acres)</label>
              <input type="number" class="form-control" min="0" />
            </div>
            <div class="col-md-2">
              <label class="form-label">Unit Cost</label>
              <input type="number" class="form-control" step="0.01" />
            </div>
            <div class="col-md-2">
              <label class="form-label">Subtotal ($)</label>
              <input type="text" class="form-control" readonly />
            </div>
          </div>
        </div>

        <!-- Section 3: Soil Testing -->
        <div class="mb-4">
          <h6 class="fw-bold">Soil Testing / Geotech Report</h6>
          <div class="row g-2 align-items-end">
            <div class="col-md-4">
              <label class="form-label">Report Type</label>
              <select class="form-select">
                <option selected disabled>Choose...</option>
                <option>Basic Soil Test</option>
                <option>Geotech Report</option>
                <option>Both</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Unit Cost ($)</label>
              <input type="number" class="form-control" step="0.01" />
            </div>
            <div class="col-md-3">
              <label class="form-label">Subtotal ($)</label>
              <input type="text" class="form-control" readonly />
            </div>
          </div>
        </div>

        <!-- Section 4: Temporary Utilities -->
        <div class="mb-4">
          <h6 class="fw-bold">Temporary Utilities</h6>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="tempPower" />
            <label class="form-check-label" for="tempPower">Temporary Power Pole</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="portaPotty" />
            <label class="form-check-label" for="portaPotty">Portable Toilet</label>
          </div>
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="tempWater" />
            <label class="form-check-label" for="tempWater">Temporary Water Connection</label>
          </div>
          <div class="row g-2">
            <div class="col-md-3">
              <label class="form-label">Total Cost for Checked Items ($)</label>
              <input type="text" class="form-control" readonly />
            </div>
          </div>
        </div>

        <!-- Section 5: Permits -->
        <div class="mb-4">
          <h6 class="fw-bold">Building Preparation Permits</h6>
          <div class="row g-2 align-items-end">
            <div class="col-md-3">
              <label class="form-label">Estimated Fee ($)</label>
              <input type="number" class="form-control" step="0.01" />
            </div>
            <div class="col-md-3">
              <label class="form-label">Subtotal ($)</label>
              <input type="text" class="form-control" readonly />
            </div>
          </div>
        </div>
      </div>

        <hr />

        <div class="mb-3">
        <label class="form-label fw-bold">Total Building Preparation Cost</label>
        <input type="text" id="totalCost" class="form-control readonly-input fw-bold" readonly />
        </div>

        <button class="btn btn-dark" onclick="saveAndContinue()">Continue</button>
    </div>

        <!-- Total -->
        <div class="my-4">
            <button type="submit" class="btn btn-dark w-100">Calculate Total</button>
        </div>

        </form>

        <div id="totalResult" class="alert alert-success d-none"></div>
    </div>

    <div class="mt-4">
    <div class="d-grid gap-3">
        <a href="contact-lht.html" class="btn btn-outline-dark">
        üí¨ Talk to an LHT Expert
        </a>
        <a href="00b.dashboard.html" class="btn btn-dark">
        ‚ûï Proceed with Estimating Other Items
        </a>
    </div>
    </div>

  <script>
    function formatUSD(num) {
      return '$' + Number(num).toLocaleString();
    }

    function parseUSD(str) {
      return parseFloat(str.replace(/[$,]/g, '')) || 0;
    }

    function calculateCosts() {
      const listingPrice = parseFloat(localStorage.getItem('selectedListingPrice')) || 0;

      const earnest = listingPrice * 0.015;
      const closing = listingPrice * 0.03;

      const fixed = {
        titleInsurance: 900,
        survey: 600,
        proratedTax: 1200,
        hoaFee: 350,
        optionFee: 100,
        loanFee: 750
      };

      const total =
        listingPrice +
        earnest +
        fixed.titleInsurance +
        fixed.survey +
        closing +
        fixed.proratedTax +
        fixed.hoaFee +
        fixed.optionFee +
        fixed.loanFee;

      // Display values
      document.getElementById("listingPrice").value = formatUSD(listingPrice);
      document.getElementById("earnestMoney").value = formatUSD(earnest);
      document.getElementById("closingCosts").value = formatUSD(closing);
      document.getElementById("totalCost").value = formatUSD(total);

      // Store for next module
      localStorage.setItem("totalLandAcquisitionCost", total.toFixed(2));
    }

    function saveAndContinue() {
      alert("Cost saved. Proceeding...");
      window.location.href = "02.site-development-cost.html"; // adjust path if needed
    }

    window.onload = calculateCosts;
  </script>

  <script>
    // Load from localStorage and display selected parcel info
    const address = localStorage.getItem("parcelAddress") || "N/A";
    const parcelID = localStorage.getItem("parcelID") || "N/A";
    const lat = localStorage.getItem("latitude") || "N/A";
    const lng = localStorage.getItem("longitude") || "N/A";

    document.getElementById("summaryAddress").textContent = address;
    document.getElementById("summaryParcelID").textContent = parcelID;
    document.getElementById("summaryCoords").textContent = `${lat}, ${lng}`;
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
